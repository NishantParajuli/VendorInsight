{% block content %}
<head>
    <style>
        .chart-container {
            width: 100%;
            height: 500px; /* Adjust the height value as needed */
        }
    </style>
</head>
<h1>Welcome, Vendor!</h1>
<p>This is the vendor-only page.</p>
<h2>Vendor Statistics</h2>
<ul>
    <li>Total Sales: {{ total_sales }}</li>
    <li>Total Orders: {{ total_orders }}</li>
    <li>Total Views: {{ total_views }}</li>
    <li>Conversion Rate: {{ conversion_rate }}%</li>
</ul>

<form method="GET">
    {{ form.as_p }}
    <button type="submit">Filter</button>
</form>

<h2>Top Selling Products</h2>
<ul>
    {% for product in top_selling_products %}
        <li>{{ product.product__name }} - {{ product.total_quantity }} units sold</li>
    {% endfor %}
</ul>

<h2>Sales Data</h2>

<div class="chart-container">
    <canvas id="salesChart"></canvas>
</div>

<table>
    <thead>
        <tr>
            <th>Date</th>
            <th>Total Sales</th>
        </tr>
    </thead>
    <tbody>
        {% for data in sales_data %}
            <tr>
                <td>{{ data.order__order_date }}</td>
                <td>{{ data.total_sales }}</td>
            </tr>
        {% endfor %}
    </tbody>
</table>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    var ctx = document.getElementById('salesChart').getContext('2d');
    var labels = {{ labels|safe }};
    var data = {{ data|safe }};

    var chart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: labels,
            datasets: [{
                label: 'Sales',
                data: data,
                backgroundColor: 'rgba(75, 192, 12, 0.2)',
                borderColor: 'rgba(75, 192, 12, 1)',
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
</script>
{% endblock %}
